<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ titulo }}</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@600&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.cdnfonts.com/css/din-condensed');

        /* ========================================
           CONFIGURAÇÃO DE PÁGINA (CSS Paged Media)
           ======================================== */
        @page {
            size: A4;
            margin: 20mm 15mm;

            @top-right {
                content: "Página " counter(page);
                font-family: 'Inter', sans-serif;
                font-size: 8pt;
                color: #666;
            }
        }

        /* Primeira página sem número */
        @page :first {
            @top-right {
                content: "";
            }
        }

        /* ========================================
           ESTILOS GERAIS
           ======================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: white;
            color: #333;
        }

        /* ========================================
           HEADER DA PÁGINA
           ======================================== */
        .page-header {
            margin-bottom: 30px;
            padding-top: 2px;
            position: relative;
        }

        .header-bar {
            position: absolute;
            top: -20mm;
            left: -15mm;
            right: -15mm;
            height: 12px;
            background: #A7D13E;
        }

        .header-content-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 40px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }

        .header-left-section {
            flex: 1;
        }

        .title {
            font-family: 'DIN Condensed', 'Arial Black', sans-serif;
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 0;
        }

        .subtitle {
            font-family: 'Inter', sans-serif;
            font-size: 8.5pt;
            color: #666;
            font-style: italic;
            margin-bottom: 0;
        }

        .header-right-section {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .logo-container {
            margin-bottom: 30px;
            text-align: right;
        }

        .logo-container svg {
            width: 200px;
            height: auto;
        }

        .saldo-base-box {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 1.5px;
            text-align: right;
        }

        .saldo-base-label {
            font-family: 'Inter', sans-serif;
            font-size: 7pt;
            font-weight: 500;
            color: #666;
        }

        .saldo-base-value {
            font-family: 'Barlow Semi Condensed', sans-serif;
            font-size: 14pt;
            font-weight: 600;
            color: #333;
            display: flex;
            justify-content: flex-end;
            align-items: baseline;
            gap: 3px;
        }

        .saldo-base-value .sign {
            display: inline-block;
            min-width: 8px;
            text-align: right;
            font-size: 14pt;
        }

        .saldo-base-value .currency {
            display: inline-block;
            min-width: 24px;
            text-align: left;
            font-size: 10pt;
        }

        .saldo-base-value .value {
            text-align: right;
        }

        .report-info {
            font-family: 'Inter', sans-serif;
            font-size: 6.5pt;
            color: #999;
            margin-top: 15px;
        }

        .report-info-item {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 3px;
        }

        .report-info-item:last-child {
            margin-bottom: 0;
        }

        .report-info-item svg {
            width: 10px;
            height: 10px;
            flex-shrink: 0;
            fill: #91D9A6;
        }

        /* Estilos para alerta com cores condicionais */
        .report-info-item.alerta-item {
            font-weight: 600;
        }

        .alerta-item.alerta-saldo-excelente svg {
            fill: #91D9A6;
        }

        .alerta-item.alerta-saldo-excelente span {
            color: #91D9A6;
        }

        .alerta-item.alerta-saldo-bom svg {
            fill: #FFE295;
        }

        .alerta-item.alerta-saldo-bom span {
            color: #D4A60D;
        }

        .alerta-item.alerta-saldo-atencao svg {
            fill: #FBBD89;
        }

        .alerta-item.alerta-saldo-atencao span {
            color: #E07A2B;
        }

        .alerta-item.alerta-saldo-critico svg {
            fill: #F68C90;
        }

        .alerta-item.alerta-saldo-critico span {
            color: #E63946;
        }

        .alerta-item.alerta-saldo-negativo svg {
            fill: #E73338;
        }

        .alerta-item.alerta-saldo-negativo span {
            color: #E73338;
        }

        /* ========================================
           SEÇÃO DE DIA (Timeline)
           ======================================== */
        .day-section {
            margin-bottom: 30px;
            position: relative;
            padding-left: 20px;
            margin-left: 6px;

            /* IMPORTANTE: Evitar quebra de página dentro de um dia */
            page-break-inside: avoid;

            /* Se não couber na página, quebra antes */
            orphans: 3;
            widows: 3;
        }

        /* Bolinha verde da timeline */
        .day-section::before {
            content: '';
            position: absolute;
            left: -4.65px;
            top: 4px;
            width: 10px;
            height: 10px;
            background: #91D9A6;
            border-radius: 50%;
            z-index: 2;
        }

        /* Cores condicionais baseadas no saldo */
        .day-section.saldo-excelente::before {
            background: #91D9A6; /* Verde - saldo >= 15M */
        }

        .day-section.saldo-bom::before {
            background: #FFE295; /* Amarelo claro - 10M <= saldo < 15M */
        }

        .day-section.saldo-atencao::before {
            background: #FBBD89; /* Laranja claro - 5M < saldo < 10M */
        }

        .day-section.saldo-critico::before {
            background: #F68C90; /* Vermelho claro - 0 < saldo <= 5M */
        }

        .day-section.saldo-negativo::before {
            background: #E73338; /* Vermelho forte - saldo < 0 */
        }

        /* Linha vertical da timeline */
        .day-section::after {
            content: '';
            position: absolute;
            left: 0px;
            top: 8px;
            bottom: 0;
            width: 0.7px;
            background: #d0d0d0;
            z-index: 1;
        }

        /* Última seção não precisa de linha */
        .day-section:last-child::after {
            display: none;
        }

        /* ========================================
           HEADER DO DIA
           ======================================== */
        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 1px;
            padding-right: 7.5px;
            border-bottom: 1px solid #d0d0d0;
        }

        .day-date {
            font-family: 'Barlow Semi Condensed', sans-serif;
            font-size: 9.5pt;
            font-weight: 600;
            color: #333;
            flex-shrink: 1;
            min-width: 0;
        }

        .day-total {
            font-family: 'Barlow Semi Condensed', sans-serif;
            font-size: 9.5pt;
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: baseline;
            gap: 3px;
            white-space: nowrap;
            flex-shrink: 0;
            margin-left: 1px;
        }

        .day-total .sign {
            display: inline-block;
            min-width: 7px;
            text-align: right;
        }

        .day-total .currency {
            display: inline-block;
            min-width: 20px;
            text-align: left;
        }

        .day-total .value {
            text-align: right;
        }

        /* ========================================
           TRANSAÇÕES (Duas colunas)
           ======================================== */
        .transactions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 80px;
        }

        .transaction-column {
            min-height: 30px;
        }

        .transaction-column h3 {
            font-family: 'Inter', sans-serif;
            font-size: 5.5pt;
            font-weight: 500;
            font-style: italic;
            color: #333;
            margin-bottom: 8px;
        }

        /* Tabela de transações (dinâmica por dia) */
        .transaction-table {
            width: 100%;
            border-collapse: collapse;
            font-family: 'Inter', sans-serif;
            font-size: 5.5pt;
            font-weight: 500;
            font-style: italic;
            color: #666;
            line-height: 1.4;
        }

        .transaction-table td {
            padding: 2px 0;
            vertical-align: top;
        }

        .transaction-table td.desc {
            padding-right: 10px;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .transaction-table td.monetary {
            display: flex;
            align-items: baseline;
            justify-content: flex-end;
            gap: 3px;
            white-space: nowrap;
        }

        .transaction-table .sign {
            flex: 0 0 6px;
            text-align: right;
        }

        .transaction-table .currency {
            flex: 0 0 18px;
            text-align: left;
        }

        .transaction-table .value {
            flex: 0 0 auto;
            text-align: right;
            font-variant-numeric: tabular-nums;
        }

        /* Linha de total dentro da tabela */
        .transaction-table tr.total-row {
            border-top: 0.5px solid #e0e0e0;
        }

        .transaction-table tr.total-row td {
            padding-top: 8px;
        }

        .transaction-table tr.total-row .sign,
        .transaction-table tr.total-row .currency,
        .transaction-table tr.total-row .value {
            font-weight: 600;
            color: #333;
        }

        .transaction-table tr.total-row.total-row-negative .sign,
        .transaction-table tr.total-row.total-row-negative .currency,
        .transaction-table tr.total-row.total-row-negative .value {
            color: #d32f2f;
        }

        /* ========================================
           MENSAGENS ESPECIAIS
           ======================================== */
        .no-transactions {
            font-family: 'Inter', sans-serif;
            font-size: 5pt;
            font-style: italic;
            color: #999;
            padding: 3px 0;
        }

        /* ========================================
           RODAPÉ
           ======================================== */
        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 2px solid #9FCD3F;
            text-align: center;
            font-family: 'Inter', sans-serif;
            font-size: 8pt;
            color: #999;
            page-break-inside: avoid;
        }

        /* ========================================
           CONTROLES DE PAGINAÇÃO
           ======================================== */

        /* Forçar quebra de página antes de um elemento se necessário */
        .page-break-before {
            page-break-before: always;
        }

        /* Evitar quebra de página dentro do elemento */
        .avoid-break {
            page-break-inside: avoid;
        }

        /* ========================================
           ESTILOS DE IMPRESSÃO/PDF
           ======================================== */
        @media print {
            body {
                background: white;
                padding: 0;
                margin: 0;
            }

            /* Garantir que cores sejam impressas */
            * {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }
    </style>
</head>
<body>
    <!-- HEADER PRINCIPAL -->
    <div class="page-header">
        <div class="header-bar"></div>

        <div class="header-content-wrapper">
            <div class="header-left-section">
                <h1 class="title">{{ titulo }}</h1>
                {% if subtitulo %}
                <p class="subtitle">{{ subtitulo }}</p>
                {% endif %}

                <div class="report-info">
                    <div class="report-info-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2z"/>
                        </svg>
                        <span>Período: {{ periodo_inicio }} a {{ periodo_fim }}</span>
                    </div>
                    <div class="report-info-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.2 3.2.8-1.3-4.5-2.7V7z"/>
                        </svg>
                        <span>Atualizado em: {{ data_geracao }}</span>
                    </div>
                    {% if alerta %}
                    <div class="report-info-item alerta-item alerta-{{ alerta.status }}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                        </svg>
                        <span>{{ alerta.mensagem }}</span>
                    </div>
                    {% endif %}
                </div>
            </div>

            <div class="header-right-section">
                <div class="logo-container">
                    <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" viewBox="0 0 4181080 446490" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <defs>
                            <style type="text/css">
                                .fil0 {fill:#A8CF45}
                                .fil1 {fill:#373435;fill-rule:nonzero}
                                .fil4 {fill:#847059;fill-rule:nonzero}
                                .fil3 {fill:#A8CF45;fill-rule:nonzero}
                                .fil2 {fill:#A3CD46;fill-rule:nonzero}
                            </style>
                        </defs>
                        <g>
                            <g>
                                <path class="fil0" d="M538444 129265c-83206,30708 -150813,-128525 -314253,-128525 -142628,8473 -225390,107702 -224178,225105 1169,113320 85086,213638 237545,219902 104212,0 222845,-59734 337328,-136038 154029,-102665 269769,-228361 427964,-228361 97259,0 183964,61908 183964,140410 0,97109 -89494,135096 -150670,135096 -125383,0 -149995,-63275 -205932,-78262 89049,17378 96934,55792 203527,57303 48522,687 79274,-22947 82498,-78850 0,-79414 -74718,-104454 -125581,-105590 -82173,-1833 -190499,44281 -291198,167255 103268,-33184 137441,127780 307569,127780 118815,0 233273,-84691 233273,-232533 0,-106047 -100099,-209934 -240705,-213957 -125479,0 -266364,102110 -406919,200136 -120474,84019 -239819,166120 -359025,166120 -122335,-2226 -182014,-82462 -182014,-149325 0,-82025 72275,-125502 155622,-128133 35643,-1126 69481,9044 102873,24549 29027,13475 49547,35068 86959,48608 -37321,7804 -74961,-38297 -175803,-52425 -45013,-6306 -98332,11798 -99819,82142 0,76441 78858,107180 136310,104120 77202,-4106 185705,-54385 280665,-166527z"/>
                                <g>
                                    <path class="fil1" d="M2329807 187873c-9322,0 -18242,3652 -26759,10946 -7297,7295 -10946,16016 -10946,26153 0,9322 3649,18241 10946,26756 7300,7297 16217,10946 26759,10946 9327,0 17844,-3649 25546,-10946 7700,-7298 11555,-16217 11555,-26756 0,-9327 -3649,-17839 -10949,-25544 -7300,-7705 -16013,-11555 -26152,-11555z"/>
                                    <path class="fil2" d="M2329807 7859c-23107,0 -42976,4257 -59598,12769 -6892,4056 -13782,8819 -20678,14293 -6890,5472 -12973,11455 -18244,17940 -9327,12970 -16624,26557 -21895,40748 -1619,6485 -2940,12973 -3950,19458 -1016,6490 -1927,13785 -2742,21898l0 268807c0,9322 3649,18241 10949,26756 7301,7300 16217,10949 26759,10949 9327,0 17842,-3649 25544,-10949 7702,-7298 11557,-16217 11557,-26756l0 -268807 0 -14601c400,-2833 1114,-5673 2125,-8512 1013,-2839 2839,-5879 5271,-9120 4056,-5678 9120,-10137 15103,-13383 5877,-3244 15608,-5475 29193,-6689 11451,0 20678,2230 27668,6689 7806,3651 13484,8109 16929,13383 3548,5271 5472,11147 5877,17632l1825 14601 0 268807c0,9322 3649,18241 10947,26756 7303,7300 16217,10949 26758,10949 9330,0 17845,-3649 25547,-10949 7705,-7298 11555,-16217 11555,-26756l0 -268807c0,-13786 -1926,-27674 -5779,-41663 -3850,-13984 -11253,-27471 -22200,-40441 -8919,-12568 -22096,-23311 -39530,-32233 -7298,-4056 -16013,-7194 -26147,-9428 -10137,-2230 -21083,-3341 -32844,-3341z"/>
                                    <path class="fil3" d="M2158913 8869c-4054,-809 -7295,-1217 -9727,-1217 -6083,0 -12671,2133 -19765,6388 -7099,4257 -12470,11655 -16119,22199l-52909 213465 -52908 -213465c-2434,-10139 -8113,-17842 -17032,-23112 -6080,-3649 -12362,-5475 -18850,-5475 -1624,0 -4866,408 -9729,1217 -9734,2432 -17233,8211 -22506,17133 -3242,7702 -4864,17230 -4864,28579l89399 358312c810,3648 2432,7294 4866,10946 2432,3649 5779,7194 10036,10645 4255,3447 11452,5773 21588,6993 8920,0 16625,-2432 23113,-7300 6890,-6081 11348,-13177 13378,-21284l89398 -358312c810,-4864 1218,-8306 1218,-10338 0,-6080 -1823,-12161 -5472,-18241 -4866,-7705 -12571,-13484 -23115,-17133z"/>
                                    <path class="fil2" d="M1842671 314371c0,5675 -605,10538 -1823,14595 0,5273 -1725,10644 -5172,16116 -3443,5475 -9222,10846 -17331,16117 -6890,3651 -16014,5474 -27365,5474 -11761,0 -20882,-1725 -27372,-5173 -6485,-3442 -11960,-8411 -16416,-14899 -2839,-4051 -5273,-9930 -7297,-17635 0,-6488 0,-11354 0,-14595l0 -179406 0 -14601c402,-2833 1111,-5673 2125,-8512 1016,-2839 2741,-5879 5172,-9120 4051,-5678 9020,-10137 14900,-13383 5876,-3244 15505,-5475 28888,-6689 11351,0 20475,2230 27365,6689 7702,3651 13280,8109 16725,13383 3445,5271 5371,11147 5778,17632l1823 14601 0 179406zm-51691 -306512c-23115,0 -42981,4257 -59602,12769 -6890,4056 -13786,8819 -20676,14293 -6895,5472 -12976,11455 -18244,17940 -9327,12970 -16624,26557 -21895,40748 -1622,6485 -2942,12973 -3956,19458 -1010,6490 -1923,13785 -2733,21898l0 179406c0,10136 405,17537 1217,22199 807,4660 2633,11248 5472,19763 4458,15002 11658,28581 21588,40747 9936,12164 23007,22703 39227,31625 8109,3649 17230,6691 27367,9123 10139,2429 20881,3649 32235,3649 23920,0 43889,-4260 59905,-12772 16010,-8518 28885,-18953 38614,-31323 9730,-12362 17030,-26047 21893,-41049 1622,-6083 3043,-13074 4260,-20980 1217,-7909 1823,-14899 1823,-20982l0 -179406c0,-13786 -1926,-27674 -5776,-41663 -3850,-13984 -11253,-27471 -22200,-40441 -8919,-12568 -22096,-23311 -39530,-32233 -7298,-4056 -16016,-7194 -26153,-9428 -10131,-2230 -21083,-3341 -32836,-3341z"/>
                                    <path class="fil2" d="M1513052 7859c-23112,0 -42978,4257 -59602,12769 -6890,4056 -13786,8819 -20676,14293 -6895,5472 -12975,11455 -18249,17940 -9321,12970 -16619,26557 -21890,40748 -1624,6485 -2939,12973 -3956,19458 -1013,6490 -1923,13785 -2733,21898l0 268807c0,9322 3649,18241 10947,26756 7297,7300 16217,10949 26755,10949 9327,0 17839,-3649 25544,-10949 7705,-7298 11555,-16217 11555,-26756l0 -268807 0 -14601c408,-2833 1114,-5673 2130,-8512 1011,-2839 2839,-5879 5271,-9120 4054,-5678 9123,-10137 15103,-13383 5879,-3244 15611,-5475 29193,-6689 11449,0 20675,2230 27666,6689 7808,3651 13484,8109 16931,13383 3549,5271 5472,11147 5880,17632l1823 14601 0 268807c0,9322 3648,18241 10949,26756 7294,7300 16217,10949 26758,10949 9322,0 17836,-3649 25539,-10949 7707,-7298 11555,-16217 11555,-26756l0 -268807c0,-13786 -1927,-27674 -5774,-41663 -3855,-13984 -11253,-27471 -22199,-40441 -8920,-12568 -22097,-23311 -39528,-32233 -7300,-4056 -16019,-7194 -26155,-9428 -10137,-2230 -21083,-3341 -32837,-3341z"/>
                                    <path class="fil4" d="M4034521 5068l0 357484 146559 0 0 77455 -234928 0 0 -434939 88369 0zm-245955 434939l2187 -434939 85356 0 0 434939 -87543 0zm-158489 0l-86179 0 0 -357122 -112683 0 0 -77817 310623 0 0 77817 -111761 0 0 357122zm-223430 -312296c0,70894 -30462,104616 -90214,123354l0 1203 106319 187739 -97236 0 -97705 -184120 -41413 0 0 184120 -85519 0 0 -434939 120436 0c29690,0 62154,-1181 92472,7456 50341,14336 92860,58823 92860,115187zm-168012 62629c13609,0 25142,-625 34603,-1970 9457,-1347 17349,-3303 23813,-5917 11954,-4831 20257,-11560 24892,-20080 4578,-8423 6890,-18203 6890,-29229 0,-9413 -1826,-17841 -5480,-25103 -3649,-7260 -9827,-12838 -18505,-17122 -5672,-2799 -12777,-4842 -21324,-6184 -8545,-1345 -19165,-1972 -31777,-1972l-65349 0 0 107577 52237 0zm-363517 174790l169180 0 0 74877 -255843 0 0 -434939 257052 0 0 77127 -170389 0 0 103774 144399 0 0 72570 -144399 0 0 106591zm-310109 74877l-87568 0 0 -434939 259323 0 0 77831 -173660 0 0 103040 147673 0 0 75493 -145768 0 0 178575z"/>
                                    <path class="fil4" d="M2329418 172452c28568,0 51729,23161 51729,51729 0,28568 -23161,51730 -51729,51730 -28565,0 -51726,-23162 -51726,-51730 0,-28568 23161,-51729 51726,-51729z"/>
                                </g>
                            </g>
                        </g>
                    </svg>
                </div>

                <div class="saldo-base-box">
                    <div class="saldo-base-label">Saldo bancário base</div>
                    <div class="saldo-base-value">
                        {% set saldo_fmt = saldo_base|format_currency_accounting %}
                        <span class="sign">{{ saldo_fmt.sign }}</span>
                        <span class="currency">{{ saldo_fmt.currency }}</span>
                        <span class="value">{{ saldo_fmt.value }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TIMELINE DE DIAS -->
    {% for dia in dias %}
    <div class="day-section {{ dia.saldo_status }}">
        <!-- Header do dia -->
        <div class="day-header">
            <div class="day-date">{{ dia.data }}</div>
            <div class="day-total">
                {% set saldo_fmt = dia.saldo_final|format_currency_accounting %}
                <span class="sign">{{ saldo_fmt.sign }}</span>
                <span class="currency">{{ saldo_fmt.currency }}</span>
                <span class="value">{{ saldo_fmt.value }}</span>
            </div>
        </div>

        <!-- Transações do dia (duas colunas) -->
        <div class="transactions">
            <!-- COLUNA: ENTRADAS -->
            <div class="transaction-column">
                <h3>Entradas</h3>

                {% if dia.entradas %}
                    <table class="transaction-table">
                        {% for transacao in dia.entradas %}
                        {% set valor_fmt = transacao.valor|format_currency_accounting %}
                        <tr>
                            <td class="desc">{{ transacao.descricao }}</td>
                            <td class="monetary">
                                <span class="sign">{{ valor_fmt.sign }}</span>
                                <span class="currency">{{ valor_fmt.currency }}</span>
                                <span class="value" style="width: {{ dia.max_width_entradas }}ch;">{{ valor_fmt.value }}</span>
                            </td>
                        </tr>
                        {% endfor %}
                        <tr class="total-row">
                            <td class="desc"></td>
                            {% set total_fmt = dia.total_entradas|format_currency_accounting %}
                            <td class="monetary">
                                <span class="sign">{{ total_fmt.sign }}</span>
                                <span class="currency">{{ total_fmt.currency }}</span>
                                <span class="value" style="width: {{ dia.max_width_entradas }}ch;">{{ total_fmt.value }}</span>
                            </td>
                        </tr>
                    </table>
                {% else %}
                    <div class="no-transactions">Nenhuma entrada registrada neste dia</div>
                {% endif %}
            </div>

            <!-- COLUNA: SAÍDAS -->
            <div class="transaction-column">
                <h3>Saídas</h3>

                {% if dia.saidas %}
                    <table class="transaction-table">
                        {% for transacao in dia.saidas %}
                        {% set valor_fmt = transacao.valor|format_currency_accounting %}
                        <tr>
                            <td class="desc">{{ transacao.descricao }}</td>
                            <td class="monetary">
                                <span class="sign">-</span>
                                <span class="currency">{{ valor_fmt.currency }}</span>
                                <span class="value" style="width: {{ dia.max_width_saidas }}ch;">{{ valor_fmt.value }}</span>
                            </td>
                        </tr>
                        {% endfor %}
                        <tr class="total-row total-row-negative">
                            <td class="desc"></td>
                            {% set total_fmt = dia.total_saidas|format_currency_accounting %}
                            <td class="monetary">
                                <span class="sign">-</span>
                                <span class="currency">{{ total_fmt.currency }}</span>
                                <span class="value" style="width: {{ dia.max_width_saidas }}ch;">{{ total_fmt.value }}</span>
                            </td>
                        </tr>
                    </table>
                {% else %}
                    <div class="no-transactions">Nenhuma saída registrada neste dia</div>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}

    <!-- RODAPÉ -->
    <div class="footer">
        <p>Relatório gerado automaticamente por FluxoCaixaProcessor</p>
        <p>© {{ data_geracao[:4] }} - Todos os direitos reservados</p>
    </div>
</body>
</html>
